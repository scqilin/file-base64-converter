<!DOCTYPE html>
<html>
  <head>
    <title>Êñá‰ª∂Base64ËΩ¨Êç¢Â∑•ÂÖ∑ÈõÜÂêà</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
        height: 100vh;
        overflow: hidden;
      }

      .app-container {
        display: flex;
        height: 100vh;
      }

      /* Â∑¶‰æßÂØºËà™Ê†è */
      .sidebar {
        width: 280px;
        background: #2c3e50;
        color: white;
        display: flex;
        flex-direction: column;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      }

      .sidebar-header {
        padding: 20px;
        background: #34495e;
        border-bottom: 1px solid #1a252f;
      }

      .sidebar-header h1 {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .sidebar-header p {
        font-size: 12px;
        color: #bdc3c7;
      }

      .nav-menu {
        flex: 1;
        padding: 20px 0;
      }

      .nav-category {
        margin-bottom: 25px;
      }

      .nav-category-title {
        padding: 0 20px 10px;
        font-size: 12px;
        color: #bdc3c7;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: bold;
      }

      .nav-item {
        display: flex;
        align-items: center;
        padding: 8px 20px;
        color: #ecf0f1;
        text-decoration: none;
        transition: all 0.3s;
        border-left: 4px solid transparent;
        cursor: pointer;
        position: relative;
      }

      .nav-item:hover {
        background: #34495e;
        border-left-color: #3498db;
      }

      .nav-item.active {
        background: #34495e;
        border-left-color: #e74c3c;
        color: white;
      }

      .nav-item .icon {
        font-size: 16px;
        width: 20px;
        margin-right: 12px;
        text-align: center;
        flex-shrink: 0;
        align-self: flex-start;
        margin-top: 2px;
      }

      .nav-item .text-content {
        flex: 1;
        min-width: 0;
      }

      .nav-item .title {
        font-size: 14px;
        font-weight: 500;
        display: block;
        line-height: 1.3;
        margin-bottom: 1px;
      }

      .nav-item .subtitle {
        font-size: 11px;
        color: #bdc3c7;
        display: block;
        line-height: 1.2;
        opacity: 0.8;
      }

      /* ‰æßËæπÊ†èÂ∫ïÈÉ® */
      .sidebar-footer {
        padding: 20px;
        border-top: 1px solid #1a252f;
        background: #34495e;
      }

      .github-link {
        display: flex;
        align-items: center;
        padding: 12px 16px;
        color: #ecf0f1;
        text-decoration: none;
        border-radius: 6px;
        transition: all 0.3s;
        background: #2c3e50;
        border: 1px solid #34495e;
      }

      .github-link:hover {
        background: #3498db;
        border-color: #3498db;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
      }

      .github-link .icon {
        font-size: 16px;
        margin-right: 10px;
      }

      .github-link .text {
        font-size: 12px;
        font-weight: 500;
      }

      /* ‰∏ªÂÜÖÂÆπÂå∫Âüü */
      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .content-header {
        background: white;
        padding: 20px 30px;
        border-bottom: 1px solid #e9ecef;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .content-header h2 {
        font-size: 24px;
        color: #2c3e50;
        margin-bottom: 5px;
      }

      .content-header p {
        color: #7f8c8d;
        font-size: 14px;
      }

      .content-body {
        flex: 1;
        padding: 30px;
        overflow-y: auto;
        background: #f8f9fa;
      }

      .tool-container {
        display: none;
        max-width: 1400px;
        margin: 0 auto;
      }

      .tool-container.active {
        display: block;
      }

      /* ÂìçÂ∫îÂºèÂπ∂ÊéíÂ∏ÉÂ±Ä */
      @media (min-width: 1200px) {
        .tool-container.active {
          display: flex;
          gap: 30px;
          align-items: flex-start;
        }

        .tool-section {
          flex: 1;
          margin-bottom: 0;
          height: fit-content;
        }
      }

      /* ‰∏≠Á≠âÂ±èÂπï‰øùÊåÅ‰∏ä‰∏ãÂ∏ÉÂ±Ä */
      @media (max-width: 1199px) {
        .tool-container.active {
          display: block;
        }
      }

      .tool-section {
        background: white;
        border-radius: 8px;
        padding: 25px;
        margin-bottom: 25px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .section-title {
        font-size: 18px;
        color: #2c3e50;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #ecf0f1;
      }

      /* Ë°®ÂçïÂÖÉÁ¥†Ê†∑Âºè */
      textarea {
        width: 100%;
        height: 200px;
        padding: 15px;
        border: 2px solid #e9ecef;
        border-radius: 6px;
        font-family: 'Courier New', monospace;
        font-size: 13px;
        resize: none;
        margin-bottom: 20px;
        transition: border-color 0.3s;
      }

      textarea:focus {
        outline: none;
        border-color: #3498db;
      }

      /* Âú®Âπ∂ÊéíÂ∏ÉÂ±ÄÊó∂Ë∞ÉÊï¥textareaÈ´òÂ∫¶ */
      @media (min-width: 1200px) {
        textarea {
          height: 180px;
        }
        
        .file-info {
          max-height: 200px;
          overflow-y: auto;
        }
      }

      .form-group {
        margin-bottom: 20px;
      }

      .button-group {
        display: flex;
        gap: 12px;
        margin-bottom: 20px;
        flex-wrap: wrap;
        align-items: center;
      }

      button,
      .file-upload-button {
        padding: 12px 20px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        min-height: 44px;
      }

      button:hover,
      .file-upload-button:hover {
        background: #2980b9;
        transform: translateY(-1px);
      }

      button.success {
        background: #27ae60;
      }

      button.success:hover {
        background: #229954;
      }

      button.danger {
        background: #e74c3c;
      }

      button.danger:hover {
        background: #c0392b;
      }

      button:disabled {
        background: #bdc3c7;
        cursor: not-allowed;
        transform: none;
      }

      .file-input {
        display: none;
      }

      /* Êñá‰ª∂‰ø°ÊÅØÊòæÁ§∫ */
      .file-info {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 6px;
        padding: 20px;
        margin-bottom: 20px;
        min-height: 120px;
        display: none;
      }

      .file-info.show {
        display: block;
      }

      .file-info h3 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 16px;
      }

      .file-info-item {
        margin-bottom: 10px;
        color: #5a6c7d;
        font-size: 14px;
      }

      .file-info-item strong {
        color: #2c3e50;
        margin-right: 10px;
      }

      .info-text {
        background: #e8f4f8;
        border-left: 4px solid #3498db;
        padding: 15px;
        color: #2c3e50;
        font-size: 13px;
        line-height: 1.6;
        border-radius: 0 6px 6px 0;
      }

      .no-file {
        text-align: center;
        color: #7f8c8d;
        padding: 30px;
      }

      .file-icon {
        font-size: 48px;
        margin-bottom: 10px;
      }

      /* .stats-row {
        display: flex;
        gap: 15px;
        align-items: center;
        font-size: 14px;
        color: #5a6c7d;
      }

      .stat-item {
        background: #f8f9fa;
        padding: 8px 12px;
        border-radius: 4px;
        border: 1px solid #e9ecef;
      } */

      /* ToastÊèêÁ§∫ */
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #2c3e50;
        color: white;
        padding: 15px 20px;
        border-radius: 6px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.3s ease;
      }

      .toast.show {
        opacity: 1;
        transform: translateX(0);
      }

      .toast.success {
        background: #27ae60;
      }

      .toast.error {
        background: #e74c3c;
      }

      /* ÂìçÂ∫îÂºèËÆæËÆ° */
      @media (max-width: 768px) {
        .sidebar {
          width: 100%;
          position: fixed;
          z-index: 1000;
          transform: translateX(-100%);
          transition: transform 0.3s;
        }

        .sidebar.show {
          transform: translateX(0);
        }

        .main-content {
          width: 100%;
        }

        .content-body {
          padding: 20px;
        }

        .button-group {
          flex-direction: column;
          align-items: stretch;
        }

        /* ÁßªÂä®Á´ØÂº∫Âà∂‰∏ä‰∏ãÂ∏ÉÂ±Ä */
        .tool-container.active {
          display: block !important;
        }

        .tool-section {
          flex: none !important;
          margin-bottom: 25px !important;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Â∑¶‰æßÂØºËà™Ê†è -->
      <nav class="sidebar">
        <div class="sidebar-header">
          <h1>Êñá‰ª∂Base64ËΩ¨Êç¢Â∑•ÂÖ∑ÈõÜ</h1>
          <p>Á¶ªÁ∫øÁâàÊú¨ - ‰øùÊä§ÊÇ®ÁöÑÈöêÁßÅ</p>
        </div>
        
        <div class="nav-menu">
          <div class="nav-category">
            <div class="nav-category-title">Base64 ËΩ¨Êç¢</div>
            
            <a class="nav-item active" onclick="switchTool('image-to-base64')">
              <span class="icon">üñºÔ∏è</span>
              <div class="text-content">
                <span class="title">ÂõæÁâáËΩ¨Êç¢</span>
                <span class="subtitle">ÂõæÁâá ‚Üî Base64</span>
              </div>
            </a>
            
            <a class="nav-item" onclick="switchTool('archive-to-base64')">
              <span class="icon">üì¶</span>
              <div class="text-content">
                <span class="title">ÂéãÁº©Êñá‰ª∂ËΩ¨Êç¢</span>
                <span class="subtitle">ZIP/RAR/7Z ‚Üî Base64</span>
              </div>
            </a>
          </div>

          <div class="nav-category">
            <div class="nav-category-title">Âç≥Â∞ÜÊé®Âá∫</div>
            
            <a class="nav-item" style="opacity: 0.5; cursor: not-allowed;">
              <span class="icon">üìÑ</span>
              <div class="text-content">
                <span class="title">ÊñáÊ°£ËΩ¨Êç¢</span>
                <span class="subtitle">PDF/Word ‚Üî Base64</span>
              </div>
            </a>
            
            <a class="nav-item" style="opacity: 0.5; cursor: not-allowed;">
              <span class="icon">üéµ</span>
              <div class="text-content">
                <span class="title">Èü≥È¢ëËΩ¨Êç¢</span>
                <span class="subtitle">MP3/WAV ‚Üî Base64</span>
              </div>
            </a>
          </div>
        </div>
        
        <div class="sidebar-footer">
          <a href="https://github.com/scqilin/file-base64-converter" target="_blank" class="github-link">
            <span class="icon">‚≠ê</span>
            <span class="text">GitHub È°πÁõÆÂú∞ÂùÄ</span>
          </a>
        </div>
      </nav>

      <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
      <main class="main-content">
        <div class="content-header">
          <h2 id="current-tool-title">ÂõæÁâáËΩ¨Êç¢Â∑•ÂÖ∑</h2>
          <p id="current-tool-description">ÊîØÊåÅJPG„ÄÅPNG„ÄÅGIFÁ≠âÂ∏∏ËßÅÂõæÁâáÊ†ºÂºè‰∏éBase64‰πãÈó¥ÁöÑÁõ∏‰∫íËΩ¨Êç¢</p>
        </div>

        <div class="content-body">
          <!-- ÂõæÁâáËΩ¨Êç¢Â∑•ÂÖ∑ -->
          <div id="image-to-base64" class="tool-container active">
            <!-- ÂõæÁâáËΩ¨Base64 -->
            <div class="tool-section">
              <h3 class="section-title">üñºÔ∏è ÂõæÁâá ‚Üí Base64</h3>
              
              <textarea id="imageBase64Output" placeholder="Base64ÁªìÊûú‰ºöÊòæÁ§∫Âú®ËøôÈáå" readonly></textarea>
              
              <div class="button-group">
                <label class="file-upload-button">
                  <span>üìÅ</span>
                  ‰∏ä‰º†ÂõæÁâá
                  <input type="file" class="file-input" id="imageFileInput" accept="image/*" />
                </label>
                <button onclick="pasteImageFromClipboard()">
                  <span>üìã</span>
                  Á≤òË¥¥ÂõæÁâá
                </button>
                <button class="success" onclick="copyImageBase64()">
                  <span>üìã</span>
                  Â§çÂà∂Base64
                </button>
                <button class="danger" onclick="clearImageBase64()">
                  <span>üóëÔ∏è</span>
                  Ê∏ÖÈô§
                </button>
              </div>

              <div id="imageFileInfo" class="file-info">
                <div class="no-file">
                  <div class="file-icon">üñºÔ∏è</div>
                  <p>ËØ∑ÈÄâÊã©ÂõæÁâáÊñá‰ª∂</p>
                </div>
              </div>

              <div class="info-text">
                <strong>‰ΩøÁî®ËØ¥ÊòéÔºö</strong><br>
                1. ÁÇπÂáª"‰∏ä‰º†ÂõæÁâá"ÈÄâÊã©Êñá‰ª∂ÔºåÊàñÁÇπÂáª"Á≤òË¥¥ÂõæÁâá"‰ªéÂâ™Ë¥¥ÊùøËé∑Âèñ<br>
                2. ÊîØÊåÅ JPG„ÄÅPNG„ÄÅGIF„ÄÅBMP„ÄÅWebP Á≠âÂ∏∏ËßÅÊ†ºÂºè<br>
                3. Ëá™Âä®ËΩ¨Êç¢‰∏∫Base64Ê†ºÂºèÔºåÂπ∂‰øùÁïôÂéüÂßãÊñá‰ª∂Âêç‰ø°ÊÅØ<br>
                4. ËΩ¨Êç¢ÁöÑBase64ÂåÖÂê´Êñá‰ª∂ÂêçÔºåËøòÂéüÊó∂‰ºöËá™Âä®‰ΩøÁî®ÂéüÂßãÊñá‰ª∂Âêç<br>
                5. ÊâÄÊúâÂ§ÑÁêÜÈÉΩÂú®Êú¨Âú∞ÂÆåÊàêÔºåÁ°Æ‰øùÊñá‰ª∂ÂÆâÂÖ®
              </div>
            </div>

            <!-- Base64ËΩ¨ÂõæÁâá -->
            <div class="tool-section">
              <h3 class="section-title">üîÑ Base64 ‚Üí ÂõæÁâá</h3>
              
              <textarea id="imageBase64Input" placeholder="Á≤òË¥¥ÂõæÁâáÁöÑBase64ÁºñÁ†ÅÔºàÂ¶ÇÔºödata:image/png;base64,...)"></textarea>
              
              <div class="button-group">
                <button onclick="pasteImageBase64()">
                  <span>üìã</span>
                  Á≤òË¥¥Base64
                </button>
                <button onclick="convertBase64ToImage()">
                  <span>üîÑ</span>
                  ËΩ¨Êç¢‰∏∫ÂõæÁâá
                </button>
                <button id="downloadImageBtn" class="success" disabled onclick="downloadImage()">
                  <span>üíæ</span>
                  ‰∏ãËΩΩÂõæÁâá
                </button>
                <button class="danger" onclick="clearImageConvert()">
                  <span>üóëÔ∏è</span>
                  Ê∏ÖÈô§
                </button>
              </div>

              <div id="imagePreview" class="file-info">
                <div class="no-file">
                  <div class="file-icon">üñºÔ∏è</div>
                  <p>ÂõæÁâáÈ¢ÑËßàÂå∫Âüü</p>
                </div>
              </div>

              <div class="info-text">
                <strong>‰ΩøÁî®ËØ¥ÊòéÔºö</strong><br>
                1. Á≤òË¥¥ÂåÖÂê´ÂÆåÊï¥data:imageÂâçÁºÄÁöÑBase64ÁºñÁ†Å<br>
                2. Â¶ÇÊûúBase64ÂåÖÂê´Êñá‰ª∂Âêç‰ø°ÊÅØÔºå‰ºöËá™Âä®ËØÜÂà´Âπ∂ÊòæÁ§∫ÂéüÂßãÊñá‰ª∂Âêç<br>
                3. ÁÇπÂáª"ËΩ¨Êç¢‰∏∫ÂõæÁâá"ÁîüÊàêÈ¢ÑËßà<br>
                4. Á°ÆËÆ§Êó†ËØØÂêéÁÇπÂáª"‰∏ãËΩΩÂõæÁâá"‰øùÂ≠òÂà∞Êú¨Âú∞Ôºà‰ΩøÁî®ÂéüÂßãÊñá‰ª∂ÂêçÔºâ<br>
                5. ÊîØÊåÅËá™Âä®ËØÜÂà´ÂõæÁâáÊ†ºÂºèÂπ∂ËÆæÁΩÆÊ≠£Á°ÆÁöÑÊñá‰ª∂Êâ©Â±ïÂêç
              </div>
            </div>
          </div>

          <!-- ÂéãÁº©Êñá‰ª∂ËΩ¨Êç¢Â∑•ÂÖ∑ -->
          <div id="archive-to-base64" class="tool-container">
            <!-- ÂéãÁº©Êñá‰ª∂ËΩ¨Base64 -->
            <div class="tool-section">
              <h3 class="section-title">üì¶ ÂéãÁº©Êñá‰ª∂ ‚Üí Base64</h3>
              
              <textarea id="archiveBase64Output" placeholder="Base64ÁªìÊûú‰ºöÊòæÁ§∫Âú®ËøôÈáå" readonly></textarea>
              
              <div class="button-group">
                <label class="file-upload-button">
                  <span>üìÅ</span>
                  ‰∏ä‰º†ÂéãÁº©Êñá‰ª∂
                  <input type="file" class="file-input" id="archiveFileInput" accept=".zip,.rar,.7z,.tar,.gz,.bz2,.xz" />
                </label>
                <button class="success" onclick="copyArchiveBase64()">
                  <span>üìã</span>
                  Â§çÂà∂Base64
                </button>
                <button class="danger" onclick="clearArchiveBase64()">
                  <span>üóëÔ∏è</span>
                  Ê∏ÖÈô§
                </button>
              </div>

              <!-- <div class="stats-row">
                <div class="stat-item">
                  <strong>Êñá‰ª∂Â§ßÂ∞è:</strong> <span id="archiveFileSize">0 KB</span>
                </div>
              </div> -->

              <div id="archiveFileInfo" class="file-info">
                <div class="no-file">
                  <div class="file-icon">üì¶</div>
                  <p>ËØ∑ÈÄâÊã©ÂéãÁº©Êñá‰ª∂</p>
                </div>
              </div>

              <div class="info-text">
                <strong>‰ΩøÁî®ËØ¥ÊòéÔºö</strong><br>
                1. ÊîØÊåÅÂ∏∏ËßÅÂéãÁº©Ê†ºÂºèÔºöZIP„ÄÅRAR„ÄÅ7Z„ÄÅTAR„ÄÅGZ„ÄÅBZ2„ÄÅXZ<br>
                2. ‰∏ä‰º†ÂêéËá™Âä®ËΩ¨Êç¢‰∏∫Base64ÔºåÂπ∂‰øùÁïôÂéüÂßãÊñá‰ª∂Âêç<br>
                3. ËΩ¨Êç¢ÁöÑBase64ÂåÖÂê´Êñá‰ª∂Âêç‰ø°ÊÅØÔºåËøòÂéüÊó∂Ëá™Âä®‰ΩøÁî®ÂéüÂêç<br>
                4. ÊâÄÊúâÂ§ÑÁêÜÈÉΩÂú®ÊµèËßàÂô®Êú¨Âú∞ÂÆåÊàêÔºå‰∏ç‰ºö‰∏ä‰º†Âà∞ÊúçÂä°Âô®
              </div>
            </div>

            <!-- Base64ËΩ¨ÂéãÁº©Êñá‰ª∂ -->
            <div class="tool-section">
              <h3 class="section-title">üîÑ Base64 ‚Üí ÂéãÁº©Êñá‰ª∂</h3>
              
              <textarea id="archiveBase64Input" placeholder="Á≤òË¥¥ÂéãÁº©Êñá‰ª∂ÁöÑBase64ÁºñÁ†Å..."></textarea>
              
              <div class="button-group">
                <button onclick="pasteArchiveBase64()">
                  <span>üìã</span>
                  Á≤òË¥¥Base64
                </button>
                <button onclick="convertBase64ToArchive()">
                  <span>üîÑ</span>
                  ËΩ¨Êç¢‰∏∫Êñá‰ª∂
                </button>
                <button id="downloadArchiveBtn" class="success" disabled onclick="downloadArchive()">
                  <span>üíæ</span>
                  ‰∏ãËΩΩÊñá‰ª∂
                </button>
                <button class="danger" onclick="clearArchiveConvert()">
                  <span>üóëÔ∏è</span>
                  Ê∏ÖÈô§
                </button>
              </div>

              <div id="archivePreview" class="file-info">
                <div class="no-file">
                  <div class="file-icon">üì¶</div>
                  <p>Êñá‰ª∂È¢ÑËßàÂå∫Âüü</p>
                </div>
              </div>

              <div class="info-text">
                <strong>‰ΩøÁî®ËØ¥ÊòéÔºö</strong><br>
                1. Á≤òË¥¥ÂéãÁº©Êñá‰ª∂ÁöÑBase64ÁºñÁ†ÅÔºàÊîØÊåÅËá™Âä®ËØÜÂà´Êñá‰ª∂ÂêçÔºâ<br>
                2. ÁÇπÂáª"ËΩ¨Êç¢‰∏∫Êñá‰ª∂"Ëß£ÊûêBase64Êï∞ÊçÆ<br>
                3. Â¶ÇÊûúÂåÖÂê´Êñá‰ª∂Âêç‰ø°ÊÅØÔºå‰ºöËá™Âä®‰ΩøÁî®ÂéüÂßãÊñá‰ª∂Âêç<br>
                4. ÁÇπÂáª"‰∏ãËΩΩÊñá‰ª∂"‰øùÂ≠òÂà∞Êú¨Âú∞Ôºå‰øùÊåÅÂéüÂßãÊ†ºÂºè
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- ToastÊèêÁ§∫ -->
    <div id="toast" class="toast"></div>

    <script>
      // ÂÖ®Â±ÄÂèòÈáè
      let currentImageFile = null;
      let currentArchiveFile = null;
      let currentArchiveFileName = '';
      let currentArchiveFileType = '';

      // Â∑•ÂÖ∑ÂàáÊç¢
      function switchTool(toolId) {
        // Êõ¥Êñ∞ÂØºËà™Áä∂ÊÄÅ
        document.querySelectorAll('.nav-item').forEach(item => {
          item.classList.remove('active');
        });
        event.currentTarget.classList.add('active');

        // Êõ¥Êñ∞ÂÜÖÂÆπÂå∫Âüü
        document.querySelectorAll('.tool-container').forEach(container => {
          container.classList.remove('active');
        });
        document.getElementById(toolId).classList.add('active');

        // Êõ¥Êñ∞Ê†áÈ¢ò
        const titles = {
          'image-to-base64': {
            title: 'ÂõæÁâáËΩ¨Êç¢Â∑•ÂÖ∑',
            description: 'ÊîØÊåÅJPG„ÄÅPNG„ÄÅGIFÁ≠âÂ∏∏ËßÅÂõæÁâáÊ†ºÂºè‰∏éBase64‰πãÈó¥ÁöÑÁõ∏‰∫íËΩ¨Êç¢'
          },
          'archive-to-base64': {
            title: 'ÂéãÁº©Êñá‰ª∂ËΩ¨Êç¢Â∑•ÂÖ∑',
            description: 'ÊîØÊåÅZIP„ÄÅRAR„ÄÅ7ZÁ≠âÂéãÁº©Êñá‰ª∂Ê†ºÂºè‰∏éBase64‰πãÈó¥ÁöÑÁõ∏‰∫íËΩ¨Êç¢'
          }
        };

        if (titles[toolId]) {
          document.getElementById('current-tool-title').textContent = titles[toolId].title;
          document.getElementById('current-tool-description').textContent = titles[toolId].description;
        }
      }

      // ===== ÂõæÁâáËΩ¨Êç¢ÂäüËÉΩ =====
      
      // ÂõæÁâáÊñá‰ª∂‰∏ä‰º†
      document.getElementById('imageFileInput').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        currentImageFile = file;
        
        showImageFileInfo(file);

        const reader = new FileReader();
        reader.onload = (e) => {
          // ‰∏∫ÂõæÁâá‰πüÂàõÂª∫ÂåÖÂê´Êñá‰ª∂ÂêçÁöÑBase64Ê†ºÂºè
          const base64WithFileName = createBase64WithFileName(e.target.result, file.name);
          document.getElementById('imageBase64Output').value = base64WithFileName;
          showToast('ÂõæÁâáËΩ¨Êç¢ÊàêÂäüÔºÅ', 'success');
        };
        reader.readAsDataURL(file);
      });

      // ÊòæÁ§∫ÂõæÁâáÊñá‰ª∂‰ø°ÊÅØ
      function showImageFileInfo(file) {
        const fileInfo = document.getElementById('imageFileInfo');
        const extension = getFileExtension(file.name);
        
        fileInfo.innerHTML = `
          <h3>üñºÔ∏è ÂõæÁâá‰ø°ÊÅØ</h3>
          <div class="file-info-item">
            <strong>Êñá‰ª∂ÂêçÔºö</strong>${file.name}
          </div>
          <div class="file-info-item">
            <strong>Êñá‰ª∂Â§ßÂ∞èÔºö</strong>${formatFileSize(file.size)}
          </div>
          <div class="file-info-item">
            <strong>Êñá‰ª∂Á±ªÂûãÔºö</strong>${extension.toUpperCase()} ÂõæÁâá
          </div>
          <div class="file-info-item">
            <strong>ÊúÄÂêé‰øÆÊîπÔºö</strong>${new Date(file.lastModified).toLocaleString()}
          </div>
        `;
        fileInfo.classList.add('show');
      }

      // ‰ªéÂâ™Ë¥¥ÊùøÁ≤òË¥¥ÂõæÁâá
      async function pasteImageFromClipboard() {
        try {
          const clipboardItems = await navigator.clipboard.read();
          for (const clipboardItem of clipboardItems) {
            for (const type of clipboardItem.types) {
              if (type.startsWith('image/')) {
                const blob = await clipboardItem.getType(type);
                
                // ÂàõÂª∫‰∏Ä‰∏™ËôöÊãüÊñá‰ª∂ÂØπË±°
                const file = new File([blob], `clipboard_${Date.now()}.png`, { type: blob.type });
                currentImageFile = file;
                
                showImageFileInfo(file);
                
                const reader = new FileReader();
                reader.onload = (e) => {
                  // ‰∏∫Á≤òË¥¥ÁöÑÂõæÁâá‰πüÂàõÂª∫ÂåÖÂê´Êñá‰ª∂ÂêçÁöÑBase64Ê†ºÂºè
                  const base64WithFileName = createBase64WithFileName(e.target.result, file.name);
                  document.getElementById('imageBase64Output').value = base64WithFileName;
                  showToast('ÂõæÁâáÁ≤òË¥¥ÊàêÂäüÔºÅ', 'success');
                };
                reader.readAsDataURL(blob);
                return;
              }
            }
          }
          showToast('Ââ™Ë¥¥Êùø‰∏≠Ê≤°ÊúâÂõæÁâá', 'error');
        } catch (err) {
          console.error('Á≤òË¥¥ÂõæÁâáÂ§±Ë¥•:', err);
          showToast('Á≤òË¥¥ÂõæÁâáÂ§±Ë¥•ÔºåËØ∑Á°Æ‰øùÂ∑≤Â§çÂà∂ÂõæÁâá', 'error');
        }
      }

      // Â§çÂà∂ÂõæÁâáBase64
      async function copyImageBase64() {
        const output = document.getElementById('imageBase64Output');
        if (!output.value) {
          showToast('Ê≤°ÊúâÂèØÂ§çÂà∂ÁöÑBase64ÂÜÖÂÆπÔºÅ', 'error');
          return;
        }
        
        try {
          await navigator.clipboard.writeText(output.value);
          showToast('Base64Â§çÂà∂ÊàêÂäüÔºÅ', 'success');
        } catch (err) {
          showToast('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®ÈÄâÊã©ÊñáÊú¨Â§çÂà∂', 'error');
        }
      }

      // Ê∏ÖÈô§ÂõæÁâáBase64
      function clearImageBase64() {
        document.getElementById('imageBase64Output').value = '';
        document.getElementById('imageFileInput').value = '';
        document.getElementById('imageFileInfo').classList.remove('show');
        currentImageFile = null;
      }

      // Á≤òË¥¥ÂõæÁâáBase64
      async function pasteImageBase64() {
        try {
          const text = await navigator.clipboard.readText();
          document.getElementById('imageBase64Input').value = text;
          showToast('Á≤òË¥¥ÊàêÂäüÔºÅ', 'success');
          convertBase64ToImage();
        } catch (err) {
          showToast('Á≤òË¥¥Â§±Ë¥•ÔºåËØ∑Á°Æ‰øùÂ∑≤Â§çÂà∂Base64ÂÜÖÂÆπ', 'error');
        }
      }

      // Base64ËΩ¨ÂõæÁâá
      function convertBase64ToImage() {
        const base64Input = document.getElementById('imageBase64Input').value.trim();
        if (!base64Input) {
          showToast('ËØ∑ËæìÂÖ•Base64ÊñáÊú¨ÔºÅ', 'error');
          return;
        }

        // ÂÖàÂ∞ùËØïÊèêÂèñÊñá‰ª∂Âêç
        const { fileName, base64Data } = extractFileNameFromBase64(base64Input);
        
        if (!base64Data.startsWith('data:image/')) {
          showToast('Base64Ê†ºÂºèÈîôËØØÔºåËØ∑Á°Æ‰øùÊòØÂõæÁâáÁöÑBase64ÁºñÁ†ÅÔºÅ', 'error');
          return;
        }

        const img = document.createElement('img');
        img.src = base64Data;
        img.style.maxWidth = '100%';
        img.style.maxHeight = '300px';
        img.style.borderRadius = '6px';
        
        // ‰øùÂ≠òÊñá‰ª∂Âêç‰ª•‰æõ‰∏ãËΩΩ‰ΩøÁî®
        window.currentImageFileName = fileName;
        
        img.onload = () => {
          const preview = document.getElementById('imagePreview');
          const fileNameInfo = fileName ? `<div class="file-info-item"><strong>ÂéüÂßãÊñá‰ª∂ÂêçÔºö</strong>${fileName}</div>` : '';
          preview.innerHTML = `
            <h3>üñºÔ∏è ÂõæÁâáÈ¢ÑËßà</h3>
            ${fileNameInfo}
            <div style="text-align: center; margin-top: 15px;">
              ${img.outerHTML}
            </div>
          `;
          preview.classList.add('show');
          document.getElementById('downloadImageBtn').disabled = false;
          showToast('ÂõæÁâáËΩ¨Êç¢ÊàêÂäüÔºÅ', 'success');
        };
        
        img.onerror = () => {
          showToast('Base64Ê†ºÂºèÈîôËØØÔºåËØ∑Ê£ÄÊü•ÔºÅ', 'error');
          document.getElementById('downloadImageBtn').disabled = true;
        };
      }

      // ‰∏ãËΩΩÂõæÁâá
      function downloadImage() {
        const base64Input = document.getElementById('imageBase64Input').value.trim();
        if (!base64Input) return;

        // ÊèêÂèñÂÆûÈôÖÁöÑBase64Êï∞ÊçÆÔºàÂéªÈô§Êñá‰ª∂Âêç‰ø°ÊÅØÔºâ
        const { fileName, base64Data } = extractFileNameFromBase64(base64Input);

        const link = document.createElement('a');
        link.href = base64Data;
        
        // ‰ΩøÁî®ÊèêÂèñÁöÑÊñá‰ª∂ÂêçÊàñÁîüÊàêÈªòËÆ§Êñá‰ª∂Âêç
        if (fileName) {
          link.download = fileName;
          showToast(`‰ΩøÁî®ÂéüÂßãÊñá‰ª∂Âêç‰∏ãËΩΩ: ${fileName}`, 'success');
        } else {
          // Ê†πÊçÆMIMEÁ±ªÂûãÁ°ÆÂÆöÊñá‰ª∂Êâ©Â±ïÂêç
          const mimeMatch = base64Data.match(/data:image\/([^;]+)/);
          const extension = mimeMatch ? mimeMatch[1] : 'png';
          link.download = `image_${Date.now()}.${extension}`;
          showToast('ÂõæÁâá‰∏ãËΩΩÂºÄÂßãÔºÅ', 'success');
        }
        
        link.click();
      }

      // Ê∏ÖÈô§ÂõæÁâáËΩ¨Êç¢
      function clearImageConvert() {
        document.getElementById('imageBase64Input').value = '';
        document.getElementById('imagePreview').innerHTML = `
          <div class="no-file">
            <div class="file-icon">üñºÔ∏è</div>
            <p>ÂõæÁâáÈ¢ÑËßàÂå∫Âüü</p>
          </div>
        `;
        document.getElementById('downloadImageBtn').disabled = true;
      }

      // ===== ÂéãÁº©Êñá‰ª∂ËΩ¨Êç¢ÂäüËÉΩ =====

      // ÂéãÁº©Êñá‰ª∂‰∏ä‰º†
      document.getElementById('archiveFileInput').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        currentArchiveFile = file;
        currentArchiveFileName = file.name;
        currentArchiveFileType = file.type || getFileTypeByExtension(file.name);

        // document.getElementById('archiveFileSize').textContent = formatFileSize(file.size);
        showArchiveFileInfo(file);

        const reader = new FileReader();
        reader.onload = (e) => {
          const base64WithFileName = createBase64WithFileName(e.target.result, file.name);
          document.getElementById('archiveBase64Output').value = base64WithFileName;
          showToast('Êñá‰ª∂ËΩ¨Êç¢ÊàêÂäüÔºÅ', 'success');
        };
        reader.readAsDataURL(file);
      });

      // ÊòæÁ§∫ÂéãÁº©Êñá‰ª∂‰ø°ÊÅØ
      function showArchiveFileInfo(file) {
        const fileInfo = document.getElementById('archiveFileInfo');
        const extension = getFileExtension(file.name);
        const icon = getFileIcon(extension);
        
        fileInfo.innerHTML = `
          <h3>${icon} Êñá‰ª∂‰ø°ÊÅØ</h3>
          <div class="file-info-item">
            <strong>Êñá‰ª∂ÂêçÔºö</strong>${file.name}
          </div>
          <div class="file-info-item">
            <strong>Êñá‰ª∂Â§ßÂ∞èÔºö</strong>${formatFileSize(file.size)}
          </div>
          <div class="file-info-item">
            <strong>Êñá‰ª∂Á±ªÂûãÔºö</strong>${extension.toUpperCase()} ÂéãÁº©Êñá‰ª∂
          </div>
          <div class="file-info-item">
            <strong>ÊúÄÂêé‰øÆÊîπÔºö</strong>${new Date(file.lastModified).toLocaleString()}
          </div>
        `;
        fileInfo.classList.add('show');
      }

      // Â§çÂà∂ÂéãÁº©Êñá‰ª∂Base64
      async function copyArchiveBase64() {
        const output = document.getElementById('archiveBase64Output');
        if (!output.value) {
          showToast('Ê≤°ÊúâÂèØÂ§çÂà∂ÁöÑBase64ÂÜÖÂÆπÔºÅ', 'error');
          return;
        }
        
        try {
          await navigator.clipboard.writeText(output.value);
          showToast('Base64Â§çÂà∂ÊàêÂäüÔºÅ', 'success');
        } catch (err) {
          showToast('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®ÈÄâÊã©ÊñáÊú¨Â§çÂà∂', 'error');
        }
      }

      // Ê∏ÖÈô§ÂéãÁº©Êñá‰ª∂Base64
      function clearArchiveBase64() {
        document.getElementById('archiveBase64Output').value = '';
        document.getElementById('archiveFileInput').value = '';
        // document.getElementById('archiveFileSize').textContent = '0 KB';
        document.getElementById('archiveFileInfo').classList.remove('show');
        currentArchiveFile = null;
        currentArchiveFileName = '';
        currentArchiveFileType = '';
      }

      // Á≤òË¥¥ÂéãÁº©Êñá‰ª∂Base64
      async function pasteArchiveBase64() {
        try {
          const text = await navigator.clipboard.readText();
          document.getElementById('archiveBase64Input').value = text;
          showToast('Á≤òË¥¥ÊàêÂäüÔºÅ', 'success');
          convertBase64ToArchive();
        } catch (err) {
          showToast('Á≤òË¥¥Â§±Ë¥•ÔºåËØ∑Á°Æ‰øùÂ∑≤Â§çÂà∂Base64ÂÜÖÂÆπ', 'error');
        }
      }

      // Base64ËΩ¨ÂéãÁº©Êñá‰ª∂
      function convertBase64ToArchive() {
        const base64Input = document.getElementById('archiveBase64Input').value.trim();
        if (!base64Input) {
          showToast('ËØ∑ËæìÂÖ•Base64ÊñáÊú¨ÔºÅ', 'error');
          return;
        }

        try {
          const { fileName, base64Data } = extractFileNameFromBase64(base64Input);
          
          if (!base64Data.startsWith('data:')) {
            showToast('Base64Ê†ºÂºèÈîôËØØÔºåËØ∑Á°Æ‰øùÂåÖÂê´ÂÆåÊï¥ÁöÑdata:ÂâçÁºÄÔºÅ', 'error');
            return;
          }

          const mimeMatch = base64Data.match(/data:([^;]+)/);
          const mimeType = mimeMatch ? mimeMatch[1] : 'application/octet-stream';
          
          if (fileName) {
            currentArchiveFileName = fileName;
            showToast(`Ê£ÄÊµãÂà∞ÂéüÂßãÊñá‰ª∂Âêç: ${fileName}`, 'success');
          } else {
            const extension = getExtensionFromMimeType(mimeType);
            currentArchiveFileName = `file_${Date.now()}.${extension}`;
          }
          currentArchiveFileType = mimeType;

          showArchivePreview(base64Data, mimeType, getFileExtension(currentArchiveFileName));
          
          document.getElementById('downloadArchiveBtn').disabled = false;
          showToast('Base64Ëß£ÊûêÊàêÂäüÔºÅ', 'success');
        } catch (error) {
          showToast('Base64Ê†ºÂºèÈîôËØØÔºåËØ∑Ê£ÄÊü•ÔºÅ', 'error');
          document.getElementById('downloadArchiveBtn').disabled = true;
        }
      }

      // ÊòæÁ§∫ÂéãÁº©Êñá‰ª∂È¢ÑËßà
      function showArchivePreview(base64Data, mimeType, extension) {
        const preview = document.getElementById('archivePreview');
        const icon = getFileIcon(extension);
        
        const base64Size = Math.round((base64Data.length * 3) / 4);
        
        preview.innerHTML = `
          <h3>${icon} Êñá‰ª∂È¢ÑËßà</h3>
          <div class="file-info-item">
            <strong>Êñá‰ª∂ÂêçÔºö</strong>${currentArchiveFileName}
          </div>
          <div class="file-info-item">
            <strong>È¢Ñ‰º∞Â§ßÂ∞èÔºö</strong>${formatFileSize(base64Size)}
          </div>
          <div class="file-info-item">
            <strong>Êñá‰ª∂Á±ªÂûãÔºö</strong>${extension.toUpperCase()} ÂéãÁº©Êñá‰ª∂
          </div>
          <div class="file-info-item">
            <strong>MIMEÁ±ªÂûãÔºö</strong>${mimeType}
          </div>
        `;
        preview.classList.add('show');
      }

      // ‰∏ãËΩΩÂéãÁº©Êñá‰ª∂
      function downloadArchive() {
        const base64Input = document.getElementById('archiveBase64Input').value.trim();
        if (!base64Input) return;

        try {
          const { base64Data } = extractFileNameFromBase64(base64Input);
          
          const link = document.createElement('a');
          link.href = base64Data;
          link.download = currentArchiveFileName;
          link.click();
          showToast('Êñá‰ª∂‰∏ãËΩΩÂºÄÂßãÔºÅ', 'success');
        } catch (error) {
          showToast('‰∏ãËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Base64Ê†ºÂºèÔºÅ', 'error');
        }
      }

      // Ê∏ÖÈô§ÂéãÁº©Êñá‰ª∂ËΩ¨Êç¢
      function clearArchiveConvert() {
        document.getElementById('archiveBase64Input').value = '';
        document.getElementById('archivePreview').innerHTML = `
          <div class="no-file">
            <div class="file-icon">üì¶</div>
            <p>Êñá‰ª∂È¢ÑËßàÂå∫Âüü</p>
          </div>
        `;
        document.getElementById('downloadArchiveBtn').disabled = true;
        currentArchiveFileName = '';
        currentArchiveFileType = '';
      }

      // ===== ÈÄöÁî®Â∑•ÂÖ∑ÂáΩÊï∞ =====

      // ÂàõÂª∫ÂåÖÂê´Êñá‰ª∂ÂêçÁöÑBase64Ê†ºÂºè
      function createBase64WithFileName(base64Data, fileName) {
        const fileNameBase64 = btoa(encodeURIComponent(fileName));
        return `FILENAME:${fileNameBase64}|${base64Data}`;
      }

      // ‰ªéBase64Êï∞ÊçÆ‰∏≠ÊèêÂèñÊñá‰ª∂Âêç
      function extractFileNameFromBase64(base64Data) {
        if (base64Data.startsWith('FILENAME:')) {
          const parts = base64Data.split('|');
          if (parts.length >= 2) {
            const fileNameBase64 = parts[0].replace('FILENAME:', '');
            try {
              const fileName = decodeURIComponent(atob(fileNameBase64));
              const actualBase64 = parts.slice(1).join('|');
              return { fileName, base64Data: actualBase64 };
            } catch (e) {
              console.error('Ëß£ÊûêÊñá‰ª∂ÂêçÂ§±Ë¥•:', e);
            }
          }
        }
        return { fileName: null, base64Data: base64Data };
      }

      // Ëé∑ÂèñÊñá‰ª∂Êâ©Â±ïÂêç
      function getFileExtension(filename) {
        return filename.split('.').pop().toLowerCase();
      }

      // Ê†πÊçÆÊâ©Â±ïÂêçËé∑ÂèñÊñá‰ª∂Á±ªÂûã
      function getFileTypeByExtension(filename) {
        const ext = getFileExtension(filename);
        const typeMap = {
          'zip': 'application/zip',
          'rar': 'application/x-rar-compressed',
          '7z': 'application/x-7z-compressed',
          'tar': 'application/x-tar',
          'gz': 'application/gzip',
          'bz2': 'application/x-bzip2',
          'xz': 'application/x-xz'
        };
        return typeMap[ext] || 'application/octet-stream';
      }

      // Ê†πÊçÆMIMEÁ±ªÂûãËé∑ÂèñÊâ©Â±ïÂêç
      function getExtensionFromMimeType(mimeType) {
        const typeMap = {
          'application/zip': 'zip',
          'application/x-rar-compressed': 'rar',
          'application/x-7z-compressed': '7z',
          'application/x-tar': 'tar',
          'application/gzip': 'gz',
          'application/x-bzip2': 'bz2',
          'application/x-xz': 'xz'
        };
        return typeMap[mimeType] || 'zip';
      }

      // Ëé∑ÂèñÊñá‰ª∂ÂõæÊ†á
      function getFileIcon(extension) {
        const iconMap = {
          'zip': 'üóúÔ∏è',
          'rar': 'üì¶',
          '7z': 'üóÉÔ∏è',
          'tar': 'üìÅ',
          'gz': 'üóúÔ∏è',
          'bz2': 'üì¶',
          'xz': 'üóÉÔ∏è'
        };
        return iconMap[extension] || 'üìÑ';
      }

      // Ê†ºÂºèÂåñÊñá‰ª∂Â§ßÂ∞è
      function formatFileSize(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      }

      // ToastÊèêÁ§∫
      function showToast(message, type = 'info') {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.className = `toast ${type}`;
        toast.classList.add('show');

        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }
    </script>
  </body>
</html>